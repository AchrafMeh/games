<!DOCTYPE html>
<html lang="ar" >
<head>
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-9813683040376383">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="description" content="موقع مهداوي عبد المعز لتحميل ألعاب الكمبيوتر مجانا مثل GTA و PES و Blur و Freefire. موقع خفيف وسريع بدون إعلانات مزعجة.">
    <meta name="keywords" content="العاب, تحميل, مهداوي, GTA, PES, ألعاب مجانية, ألعاب كمبيوتر, wifi4games, games for pc , meh1212mmll">
    <meta name="author" content="Abdelmouiz Mehdaoui">
    <link rel="canonical" href="https://achrafmeh.github.io/games/" />
    <link rel="stylesheet" href="style.css">
    <title>Mehdaoui Games</title>
    <link rel="icon" href="image.png">
  <style>
    
    .login-header { display: flex; justify-content: flex-end; margin-bottom: 20px; align-items: center; padding: 10px 20px; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .login-btn, .logout-btn { padding: 6px 15px; border: none; border-radius: 6px; cursor: pointer; color: #fff; }
    .login-btn { background-color: #4285F4; }
    .logout-btn { background-color: #e74c3c; }
    #user-info { display: flex; align-items: center; gap: 10px; }
    #user-info img { border-radius: 50%; width: 35px; height: 35px; }
   .comment-box {
  max-width: 700px;
  margin: 30px auto;
  background: #fff;
  padding: 25px 30px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.08);
  direction: rtl;
}

.comment-form {
  display: flex;
  align-items: flex-start;
  gap: 15px;
}

.comment-form img {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  border: 2px solid #ccc;
}

#comment-input {
  flex: 1;
  min-height: 80px;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #ccc;
  resize: vertical;
  font-size: 15px;
}

.comment {
  display: flex;
  align-items: flex-start;
  gap: 15px;
  margin-top: 20px;
}

.comment img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid #ddd;
}

.comment p {
  background: #f7f7f7;
  padding: 12px 16px;
  border-radius: 10px;
  max-width: 520px;
  font-size: 15px;
  line-height: 1.6;
  color: #333;
}

.star {
  font-size: 32px;
  cursor: pointer;
  color: #ccc;
  transition: color 0.3s;
}

.star:hover,
.star.selected {
  color: #FFA500;
}

#rating-result {
  text-align: center;
  margin-top: 10px;
  font-weight: bold;
  color: #333;
}
footer {
  background-color: #111;
  color: #bbb;
  text-align: center;
  padding: 25px 15px;
  font-size: 14px;
  border-top: 1px solid #333;
}

footer a {
  color: #66b2ff;
  margin: 0 10px;
  text-decoration: none;
  transition: 0.3s;
}

footer a:hover {
  text-decoration: underline;
  color: #ffffff;
}

  </style>
</head>
<body>

<header class="login-header">
  <div id="user-info" style="display:none">
    <img id="user-pic" src="" />
    <span id="user-name"></span>
    <button class="logout-btn" onclick="signOut()">تسجيل الخروج</button>
  </div>
  <button id="login-btn" class="login-btn" onclick="signInWithGoogle()">تسجيل الدخول</button>
</header>

<div id="search-box" style="text-align:center; margin: 20px;">
  <input 
    type="text" 
    id="search-input" 
    placeholder="🔍 ابحث عن لعبة..." 
    style="padding: 12px; width: 60%; max-width: 400px; font-size: 16px; border-radius: 8px; border: 1px solid #ccc;"
  >
  <button 
    onclick="clearSearch()" 
    style="padding: 12px; font-size: 16px; margin-right: 10px; border-radius: 8px; background-color: #e74c3c; color: white; border: none; cursor: pointer;">
    ❌ مسح
  </button>
</div>

<a id="up"></a>
    <nav class="responsive-nav">
  <div class="nav-header">
    <span class="nav-title">📂 التصنيفات</span>
    <button class="nav-toggle" onclick="toggleMenu()">☰</button>
  </div>
  <ul id="nav-menu">
    <li><a href="#" onclick="filterGames('gta')">🚔 GTA</a></li>
    <li><a href="#" onclick="filterGames('blur')">🚗 سباق</a></li>
    <li><a href="#" onclick="filterGames('batman')">🔫 أكشن</a></li>
    <li><a href="#" onclick="filterGames('ذكاء')">🧠 ذكاء</a></li>
    <li><a href="#" onclick="filterGames('fifa')">⚽️ رياضة</a></li>
    <li><a href="#" onclick="filterGames('ps5')">🎮 PS5</a></li>
  </ul>
</nav>

    <div class="gtd">
        <a href="pages/gtav.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/aBdIrZIAQk434.jpg" alt="gta v">
        <p>GTA V</p>
    </section>
        </a>
        <a href="pages/gtasa.html">
     <section>
        <img src="pp.png" alt="gta sa">
        <p>GTA Sa</p>
    </section>   
        </a>
        <a href="pages/gtaiii.html">
     <section>
        <img src="iii.jpg" alt="gta iii">
        <p>GTA III</p>
    </section>
        </a>
        <a href="https://www.downloadcomputergames.net/2020/09/grand-theft-auto-iv.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/M3APGlzQHV639.jpg" alt="gta iv">
        <p>GTA IV</p>
    </section>        
        </a>
        <a href="https://www.downloadcomputergames.net/2021/02/download-gta-vice-city.html">
    <section>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcROV2lBlaOq3bwKUga5NfG9atIew_C4eKU9Kg&s" alt="gta vc">
        <p>GTA VICE CITY</p>
    </section>    
        </a>
        <a href="https://www.downloadcomputergames.net/2020/09/download-gta-egypt-for-pc.html">
    <section>
        <img src="https://gtm-congo.com/wp-content/uploads/2024/02/GTA-Egypt.png" alt="gta egypt">
        <p>GTA Egypt</p>
    </section>       
        </a>
        <a href="https://www.wifi4games.com/pc_games/Bank_Simulator.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/tIoYJOFdRb30.jpg" alt="Bank Simulator">
        <p>Bank Simulator</p>
    </section>        
        </a>
    
    
        <a href="https://www.downloadcomputergames.net/2020/07/download-blur-game.html">
    <section>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRwrDIY0cz3mg61DtxeItS28-3LYXoSeLNk8A&s" alt="blur">
        <p>BLUR</p>
    </section>        
        </a>
        <a href="https://www.downloadcomputergames.net/2025/05/carx-street.html">
    <section>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRzoA3mQip3hfUG-TpLbKRaOdA3r9ki5iaLRQ&s" alt="carx street">
        <p>CarX Street</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/OVERPASS.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/epcGv2mbA0121.jpg" alt="Overpass Deluxe Edition">
        <p>Overpass Deluxe Edition</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Drift_Zone.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/Ttbb6Z0BHt59.jpg" alt="Drift Zone">
        <p>Drift Zone</p>
    </section>        
        </a>
         <a gref="https://www.wifi4games.com/pc_games/attack_on_titan.html">
    <section>
         <img src="https://www.wifi4games.com/img/pc_covers/260/3QY8F4ihC5827.jpg" alt="Attack on Titan">
         <p>Attack on Titan Wings of Freedom</p>
    </section>
         </a>
        <a href="https://www.wifi4games.com/pc_games/project_cars_2.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/nWW9vFz7cC691.jpg" alt="project cars 2">
        <p>project cars 2</p>
    </section>        
        </a>
    
    
        <a href="https://www.downloadcomputergames.net/2021/07/god-of-war-2-pc.html">
    <section>
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgqrx4cyq1Da-6dtNogVmgv4_sj6Sxs5TM0MeyU1YDuijIYSzjTLVi9u6y4RRVeSXutOVAEO-Vb2yUNVqiSK2qQGKNSEoeUvRafiKb8n829cNg4tfD0kxr5c6qWpx7xe62BffgRW0H3CQ/s16000-e365-rw/God-of-War-2.jpg" alt="good of God-of-War-2">
        <p>God of War 2</p>
    </section>        
        </a>
        <a href="https://www.downloadcomputergames.net/2020/11/batman-for-pc.html">
    <section>
        <img src="https://cdn-www.bluestacks.com/bs-images/GameTile_Batman-Arkham-Knight-assets.jpg" alt="batmane">
        <p>Batman vengeance</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Commandos:_Origins.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_photos/750/z0UtrRpqkb481.jpg" alt="comondos">
        <p>Commandos</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Ghost_of_Tsushima_DIRECTOR'S_CUT.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/aWCCaXbRC271.jpg" alt="Ghost of Tsushima DIRECTOR'S CUT">
        <p>Ghost of Tsushima DIRECTOR'S</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Assassin's_Creed_Mirage.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/h2ViVa3m0t182.jpg" alt="Assassin's Creed Mirage">
        <p>Assassin's Creed Mirage</p>
    </section>        
        </a>
        <a href="https://www.downloadcomputergames.net/2020/11/wwe-for-pc.html">
    <section>
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhoXD4ZdhqxkqDO5QkzQ2qQhOf5HWunYDVF1KkJg3u50r8E1yy1GtpyX-B7lV5ZBrkHeK7qcmeoNoERAzwOB9LhCDJeXONa5Kst_GQWn5PTgq81M5g8ihFFGH2xLc-El2wpsP7dOj4hUg/s16000-e365-rw/wwe.jpg" alt="wwe 2024">
        <p>WWE 2024</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Dragon_Ball_Xenoverse_2.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/0y3K6Fa8na351.jpg" alt="Dragon Ball Xenoverse 2">
        <p>Dragon Ball Xenoverse 2</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Sniper_Art_of_Victory.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/EMtfCQDFb6254.jpg" alt="Sniper Art of Victory">
        <p>Sniper Art of Victory</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Hollow_Knight_Godmaster.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/OdwQTPAbtN981.jpg" alt="Hollow_Knight_Godmaster">
        <p>Hollow Knight Godmaster</p>
    </section>
        </a>
        <a href="https://www.wifi4games.com/pc_games/R.E.P.O.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/GenQY4BS2O763.jpg" alt="R.E.P.O">
        <p>R.E.P.O</p>
    </section>   
        </a>
        <a href="https://www.wifi4games.com/pc_games/Mount__Blade_II_Bannerlord.html">
    <section>
         <img src="https://www.wifi4games.com/img/pc_covers/260/ejw0G4mzuS648.jpg" alt="Mount & Blade II Bannerlord">
         <p>Mount & Blade II Bannerlord</p>
    </section>
        </a>
        <a href="https://www.downloadcomputergames.net/2020/08/win-million.html">
    <section>
        <img src="https://ingez-ppt.com/wp-content/uploads/2024/05/%D9%84%D8%B9%D8%A8%D8%A9-%D9%85%D9%86-%D8%B3%D9%8A%D8%B1%D8%A8%D8%AD-%D8%A7%D9%84%D9%85%D9%84%D9%8A%D9%88%D9%86-1.jpg" alt="من سيربح المليون">
        <p>من سيربح المليون</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Poly_Bridge.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/798uZfW7R2278.jpg" alt="Poly Bridge">
        <p>Poly Bridge</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Portal.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/olMiEIMq3a55.jpg" alt="Portal">
        <p>Portal</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/UNRAVEL_TWO.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/Xmt4cxXgIa498.jpg" alt="UNRAVEL TWO">
        <p>UNRAVEL TWO</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Minecraft.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/v4XZzP99xp225.jpg" alt="Minecraft">
        <p>Minecraft</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Snake_Pass.html">
    <section>
         <img src="https://www.wifi4games.com/img/pc_covers/260/FukLSWe3Jm513.jpg" alt="Snake Pass">
         <p>Snake Pass</p>
    </section>
        </a>
        <a href="https://www.wifi4games.com/pc_games/ARK:_Ultimate_Survivor_Edition.html">
    <section>
          <img src="https://www.wifi4games.com/img/pc_covers/260/KgA2Roe7kK476.jpg" alt="ARK: Survival Evolved">
          <p>ARK: Survival Evolvedv</p>
    </section>
        </a>
    
        <a href="https://www.wifi4games.com/pc_games/fifa_2016.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/JU8Tnvnsar388.jpg" alt="FIFA 16">
        <p>FIFA 2016</p>
    </section>       
        </a>
        <a href="https://www.wifi4games.com/pc_games/FIFA_2019.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/mirTGjNQ7A304.jpg" alt="FIFA 19">
        <p>FIFA 2019</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/Pro_Evolution_Soccer_2015.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/qw7bCBbwRv56.jpg" alt="pes2015">
        <p>Pro Evolution Soccer 2015</p>
    </section>        
        </a>
         <a href="https://www.wifi4games.com/pc_games/NBA_2k17.html">
    <section>
         <img src="https://www.wifi4games.com/img/pc_covers/260/zUMcTWRnMa134.jpg" alt="NBA 2K17">
         <p>NBA 2K17</p>
    </section>
         </a>
        <a href="https://www.wifi4games.com/pc_games/Fifa_2014.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/GHMlLCEWQe251.jpg" alt="pes 2024">
        <p>Fifa 2014</p>
    </section>        
        </a>
        <a href="https://www.wifi4games.com/pc_games/eFootball_PES_2021.html">
    <section>
        <img src="https://www.wifi4games.com/img/pc_covers/260/wsMyh3Wz1o915.jpg" alt="pes 2021">
        <p>eFootball PES 2021</p>
    </section>        
        </a>
    </div>
    <a href="#up" class="top-button" >⬆️</a>
    <div class="end-1">
        <div class="end-2"><pre> هذا الموقع للالعاب عامة وخاصة العاب الكمبيوتر ومصمم من قبل مهداوي عبد المعز للتواصل يرجى الاتصال 0778082991</div>  
    </div>

<section class="comment-box" id="comment-section" style="display:none;">
  <h3>💬 التعليقات</h3>
  <div class="comment-form">
    <img id="comment-user-pic" src="" />
    <textarea id="comment-input" placeholder="اكتب تعليقك..."></textarea>
    <button onclick="postComment()">نشر</button>
  </div>
  <div id="comment-list"></div>
</section>

<section class="comment-box">
  <h3>⭐ قيّم الموقع</h3>
  <div class="stars-container" style="text-align:center;">
    <span class="star" data-value="1" tabindex="0" role="button" aria-label="تقييم 1 نجمة">
      ★<br><span class="star-number">1</span>
    </span>
    <span class="star" data-value="2" tabindex="0" role="button" aria-label="تقييم 2 نجوم">
      ★<br><span class="star-number">2</span>
    </span>
    <span class="star" data-value="3" tabindex="0" role="button" aria-label="تقييم 3 نجوم">
      ★<br><span class="star-number">3</span>
    </span>
    <span class="star" data-value="4" tabindex="0" role="button" aria-label="تقييم 4 نجوم">
      ★<br><span class="star-number">4</span>
    </span>
    <span class="star" data-value="5" tabindex="0" role="button" aria-label="تقييم 5 نجوم">
      ★<br><span class="star-number">5</span>
    </span>
  </div>
  <p id="rating-result" style="margin-top:10px;"></p>
</section>


<footer>
  <p>© 2025 Mehdaoui Games | جميع الحقوق محفوظة.</p>
  <p>
    <a href="privacy.html">سياسة الخصوصية</a> |
    <a href="mailto:mehdaoui.contact@gmail.com">اتصل بنا</a> |
    <a href="https://facebook.com/achrafmeh" target="_blank">فيسبوك</a>
  </p>
</footer>

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAs3aGXpEZNXz_LKTxxKUJwXwox8vr_1Lc",
    authDomain: "login-app-e78b2.firebaseapp.com",
    projectId: "login-app-e78b2",
    storageBucket: "login-app-e78b2.firebasestorage.app",
    messagingSenderId: "383164019704",
    appId: "1:383164019704:web:997defd1d82738a181dc0d"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  const provider = new firebase.auth.GoogleAuthProvider();

  function signInWithGoogle() {
    auth.signInWithPopup(provider).then(result => {
      const user = result.user;
      document.getElementById("user-info").style.display = "flex";
      document.getElementById("login-btn").style.display = "none";
      document.getElementById("user-pic").src = user.photoURL;
      document.getElementById("user-name").textContent = user.displayName;
      document.getElementById("comment-user-pic").src = user.photoURL;
      document.getElementById("comment-section").style.display = "block";
    });
  }

  function signOut() {
    auth.signOut().then(() => location.reload());
  }

  function postComment() {
    const comment = document.getElementById("comment-input").value.trim();
    const user = auth.currentUser;
    if (comment && user) {
      db.collection("comments").add({
        name: user.displayName,
        photo: user.photoURL,
        text: comment,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        document.getElementById("comment-input").value = "";
      });
    }
  }

  auth.onAuthStateChanged(user => {
    if (user) {
      document.getElementById("user-info").style.display = "flex";
      document.getElementById("login-btn").style.display = "none";
      document.getElementById("user-pic").src = user.photoURL;
      document.getElementById("user-name").textContent = user.displayName;
      document.getElementById("comment-user-pic").src = user.photoURL;
      document.getElementById("comment-section").style.display = "block";

      db.collection("comments").orderBy("timestamp", "desc").onSnapshot(snapshot => {
        const commentList = document.getElementById("comment-list");
        commentList.innerHTML = "";
        snapshot.forEach(doc => {
          const data = doc.data();
          const div = document.createElement("div");
          div.className = "comment";
          div.innerHTML = `
            <img src="${data.photo}" />
            <p><strong>${data.name}</strong><br>${data.text}</p>
          `;
          commentList.appendChild(div);
        });
      });

     db.collection("ratings").get().then(snapshot => {
  let total = 0;
  let count = 0;
  snapshot.forEach(doc => {
    total += doc.data().value;
    count++;
  });
  const avg = total / count;
  if (!isNaN(avg)) {
    document.getElementById("rating-result").textContent =
      `تقييم المستخدمين: ${avg.toFixed(1)} من 5 (${count} صوت)`;
    // عرض النجوم حسب المتوسط لو تحب (اختياري)
    document.querySelectorAll(".star").forEach(star => {
      star.style.color = parseInt(star.dataset.value) <= Math.round(avg) ? "orange" : "gray";
    });
  }
});


    }
  });

 document.querySelectorAll(".star").forEach(star => {
  star.addEventListener("click", () => {
    const rating = parseInt(star.dataset.value);
    const user = auth.currentUser;
    if (!user) {
      alert("يرجى تسجيل الدخول لتقييم الموقع.");
      return;
    }
    // نبحث إذا المستخدم صوّت قبل
    const ratingRef = db.collection("ratings").doc(user.uid);
    ratingRef.get().then(doc => {
      if (doc.exists) {
        // حدث التقييم
        ratingRef.update({
          value: rating,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
      } else {
        // اضف تقييم جديد
        ratingRef.set({
          value: rating,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
      }
      document.getElementById("rating-result").textContent = `شكراً! قيّمت الموقع بـ ${rating} من 5.`;
      document.querySelectorAll(".star").forEach(s => {
        s.style.color = parseInt(s.dataset.value) <= rating ? "orange" : "gray";
      });
    });
  });
});

</script>

<script>
  const stars = document.querySelectorAll(".stars-container .star");
  const ratingResult = document.getElementById("rating-result");
  let currentRating = 0;
  let userRatingDocId = null;
  let currentUser = null;

  // تلوين النجوم حسب التقييم
  function highlightStars(rating) {
    stars.forEach((star, idx) => {
      if (idx < rating) {
        star.classList.add("selected");
        star.style.color = "#ffa500";
      } else {
        star.classList.remove("selected");
        star.style.color = "gray";
      }
    });
  }

  stars.forEach((star, idx) => {
    star.addEventListener("mouseover", () => {
      highlightStars(idx + 1);
    });
    star.addEventListener("mouseout", () => {
      highlightStars(currentRating);
    });
    star.addEventListener("click", async () => {
      if (!currentUser) {
        alert("يجب تسجيل الدخول أولاً.");
        return;
      }
      const ratingValue = idx + 1;
      try {
        if (userRatingDocId) {
          await db.collection("ratings").doc(userRatingDocId).update({
            value: ratingValue,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
          });
        } else {
          const docRef = await db.collection("ratings").add({
            userId: currentUser.uid,
            value: ratingValue,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
          });
          userRatingDocId = docRef.id;
        }
        currentRating = ratingValue;
        highlightStars(currentRating);
        updateRatingResult();
      } catch (error) {
        alert("حدث خطأ أثناء حفظ التقييم.");
        console.error(error);
      }
    });
    star.addEventListener("keydown", e => {
      if (e.key === "Enter" || e.key === " ") {
        star.click();
        e.preventDefault();
      }
    });
  });

  async function updateRatingResult() {
    const snapshot = await db.collection("ratings").get();
    if (snapshot.empty) {
      ratingResult.textContent = "لم يقم أحد بتقييم الموقع بعد.";
      return;
    }
    let total = 0;
    snapshot.forEach(doc => total += doc.data().value);
    const avg = total / snapshot.size;
    let userText = currentUser ? `تقييمك: ${currentRating} من 5.` : "يرجى تسجيل الدخول لتقييم الموقع.";
    ratingResult.textContent = `${userText} | متوسط تقييم المستخدمين: ${avg.toFixed(1)} من 5 (${snapshot.size} صوت)`;
  }

  async function loadUserRating(user) {
    currentUser = user;
    if (!user) {
      currentRating = 0;
      userRatingDocId = null;
      highlightStars(0);
      ratingResult.textContent = "يرجى تسجيل الدخول لتقييم الموقع.";
      return;
    }
    const snapshot = await db.collection("ratings").where("userId", "==", user.uid).get();
    if (!snapshot.empty) {
      const doc = snapshot.docs[0];
      userRatingDocId = doc.id;
      currentRating = doc.data().value;
      highlightStars(currentRating);
    } else {
      currentRating = 0;
      userRatingDocId = null;
      highlightStars(0);
    }
    updateRatingResult();
  }

  auth.onAuthStateChanged(user => {
    loadUserRating(user);
  });
</script>

<script>
  const searchInput = document.getElementById("search-input");

  searchInput.addEventListener("input", () => {
    const query = searchInput.value.trim().toLowerCase();
    const games = document.querySelectorAll(".gtd a");

    games.forEach(link => {
      const gameName = link.innerText.toLowerCase();
      const imgAlt = link.querySelector("img")?.alt?.toLowerCase() || "";

      // شرط المطابقة الجزئية
      if (gameName.includes(query) || imgAlt.includes(query)) {
        link.style.display = "inline-block";
      } else {
        link.style.display = "none";
      }
    });
  });

  function clearSearch() {
    searchInput.value = "";
    const games = document.querySelectorAll(".gtd a");
    games.forEach(link => {
      link.style.display = "inline-block";
    });
  }
</script>
<script>
  function filterGames(keyword) {
    const games = document.querySelectorAll(".gtd a");
    keyword = keyword.toLowerCase();
    document.getElementById("search-input").value = keyword;

    games.forEach(link => {
      const gameName = link.innerText.toLowerCase();
      const imgAlt = link.querySelector("img")?.alt?.toLowerCase() || "";
      if (gameName.includes(keyword) || imgAlt.includes(keyword)) {
        link.style.display = "inline-block";
      } else {
        link.style.display = "none";
      }
    });
  }
</script>
<script>
  function toggleMenu() {
    document.getElementById("nav-menu").classList.toggle("active");
  }

  function filterGames(category) {
    const games = document.querySelectorAll(".gtd a");
    games.forEach(link => {
      const name = link.innerText.toLowerCase();
      if (name.includes(category.toLowerCase())) {
        link.style.display = "inline-block";
      } else {
        link.style.display = "none";
      }
    });
  }
</script>
</body>
</html>
